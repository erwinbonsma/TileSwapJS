<html>
<head>
<title>Tile Swap</title>
</head>
<body>

<h1>Puzzle</h1>

<table border="1">
<tr>
<td id="tile0" />
<td><button onclick="trySwapTiles(0, 1)">-</button></td>
<td id="tile1" />
</tr>
<tr>
<td><button onclick="trySwapTiles(0, 2)">|</button></td>
<td/>
<td><button onclick="trySwapTiles(1, 3)">|</button></td>
</tr>
<tr>
<td id="tile2" />
<td><button onclick="trySwapTiles(2, 3)">-</button></td>
<td id="tile3" />
</tr>
</table>

<p id="status" />

<button onclick="resetPuzzle()">Reset</button>

</body>

<script>
var numCols = 2;
var numRows = 2;
var numTiles = numCols * numRows;
var tileElements = [];
var tiles = [];
var numMoves = 0;

function initTileElements() {
    var i;
    for (i = 0; i < numTiles; i++) {
        tileElements[i] = document.getElementById("tile" + i);
    }
}

function setTile(tileIndex, value) {
    tiles[tileIndex] = value;
    tileElements[tileIndex].innerHTML = value;
}

function displayStatus(statusText) {
    document.getElementById("status").innerHTML = statusText;
}

function setNumMoves(value) {
    numMoves = value;
    displayStatus(numMoves + " moves");
}

function resetPuzzle() {
    var i;
    for (i = 0; i < numTiles; i++) {
        setTile(i, numTiles - i);
    }
    setNumMoves(0);
}

function isPuzzleSolved() {
    var i;
    for (i = 0; i < numTiles; i++) {
        if (tiles[i] != (i + 1)) {
            return false;
        }
    }
    return true;
}

function canSwapTiles(t1, t2) {
    var sum = tiles[t1] + tiles[t2];
    return (sum % 3) == 0 || (sum % 5) == 0;
}

function swapTiles(t1, t2) {
    var value1 = tiles[t1];
    setTile(t1, tiles[t2]);
    setTile(t2, value1);
}

function trySwapTiles(t1, t2) {
    if (canSwapTiles(t1, t2)) {
        swapTiles(t1, t2);
        setNumMoves(numMoves + 1);
        if (isPuzzleSolved()) {
            displayStatus("Solved in " + numMoves + " moves!")
        }
    }
}

initTileElements();
resetPuzzle();
displayStatus("Try me!");
</script>
</html>